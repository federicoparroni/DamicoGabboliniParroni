\chapter{Specific requirements}

\section{External Interface Requirements}
The application shows its best potential when running in a mobile device, for instance a smartphone or a tablet. This permits to extend the features and the automatic tasks of the application, thanks to the built-in device functionalities. However, a computer client version of the application can be installed, too.

\subsection{User interfaces}
The user can interact with the application through several graphical interfaces:
\begin{enumerate}
\item \textbf{Registration/login interface}: allows the user to insert credentials in order to registering or logging into the system;
\begin{figure}[H]
\begin{center}
\includegraphics[width=250pt, keepaspectratio]{"images/interfaces/login interface".jpg}
\caption{Registration/login interface}
\end{center}
\end{figure}
\item \textbf{User account interface}: user can specify his profile characteristics, such as his passes, car and/or bike ownership;
\begin{figure}[H]
\begin{center}
\includegraphics[width=250pt, keepaspectratio]{"images/interfaces/useraccount interface".jpg}
\caption{User account interface}
\end{center}
\end{figure}
\item \textbf{Appointment CRUD interface}: allows creating, showing and editing appointment parameters and related constraints;
\item \textbf{Non-scheduled appointments interface}: provides a list of all inserted appointments, but not scheduled yet (includes the possibility to delete an item of the list);
\item \textbf{Schedule interface}: user can set parameters, contraints, optimization criteria and request a schedule creation for a given date;
\item \textbf{Schedules result interface}: shows the computation of the requested schedules for a given date and asks the user to select one, then waits for confirmation for that;
\item \textbf{Schedule progress interface}: permits to keep track of the completeness percentage, indicating the directions to be followed by the user in a map, in order to arrive to the next appointments;
\item \textbf{Tickets/rides reservation interface}: allows user to buy tickets for public travel means and/or reserve a ride for the shared travel means;
\item \textbf{Appointments history interface}: shows a list of archived appointments;
\end{enumerate}

\subsection{Hardware interfaces}
Hardware interfaces are physical linking across which two or more separate components of a system exchange information. A hardware interface is described by the mechanical and electrical signals at the interface and the protocol for sequencing them. There are no interesting hardware interfaces in our scope.
%Our system relies on the following hardware interfaces:
%\begin{itemize}
%\item Mobile device: 
%\item Server: the subsystem is based on the client-server paradigm. 
%\item Travel means: gps on taxi and shared mean
%\end{itemize}

\subsection{Software interfaces}
Software interfaces are logical linking across which two or more separate applications running on a system exchange information. 
\begin{itemize}
\item API: information can be exchanged through HTTP request/response;
\end{itemize}

\subsection{Communications interfaces}
Communication interfaces allows two different architectures of the system to exchange information through communication channel. These non-homogeneous components of the system can communicate thanks to the following software interfaces and protocols:
\begin{itemize}
\item Cellular connectivity: mobile devices can connect to the internet thanks to LTE standard;
\item GPS: cellular can retrieve his coordinates position through NMEA protocol;
\item QRCode: present in most of the shared means, allows to quickly identify the nearby transportation, associating that to an URL;
\end{itemize}


\section{Functional requirements}
\subsection{Scenarios}

Here are some scenarios that describe the usage of the system.

\subsubsection{Scenario 1} \label{scenario:1}
Giovanni will start the fourth year of his Master's degree. Surfing the internet, he finds out that his lesson schedule for the first semester it has been published. Giovanni decides to fill in the application with his new appointments related to lessons attendance. In fact he knows where to go, at which time and day and for which amount of time. Since he knows that these events will going to happen for 3 months, he sets them as recurrent.

\subsubsection{Scenario 2} \label{scenario:2}
\textbf{da rileggere scritta veloce}
Giovanni want to start training but he doesn't know what are the best hours in which he can run in accord to his appointments, he know only that he can run between 5 and 7 pm, for 45 minutes. he can insert this last appointment in the application whitout specify the exactly starting hour and the system will give him the best hours in which he can run

\subsubsection{Scenario 3} \label{scenario:3}
\textbf{da rileggere scritta veloce}
Giovanni has scheduled his appointments but at lunch time his son called him because he needed a ride for go back to home. Giovanni decided to help his son and so he brought him home. now the current running schedule is not more valid so he request to the system a reschedule of his appointment according to his position and the hour of day in which he is.  

\subsection{Use cases}

\subsubsection{User log-in}
\begin{tabular}{|p{14cm}|} \hline

\textbf{Name:} User log-in \\ \hline
\textbf{Actors:} User \\ \hline
\textbf{Goals}: \goalref{goal:G9} \\ \hline
\textbf{Input Condition:} The user is registered to the system \\ \hline
\textbf{Event Flow:} 
\begin{enumerate}
\item The user needs to log-in the application, so he runs it;
\item The system provides to the user a form to fill;
\item The user fills up the form with the his e-mail and his password (as said in \ref{subsect:usermodel})
\item The user submits the form to the system;
\item The system checks the user identity and provides to the user the main application page (\textbf{reference to the main application page})
\end{enumerate} \\ \hline

\textbf{Output Condition:} The user submits the form after having filled it with a matching e-mail and password. \\ \hline

\textbf{Exceptions:} The user submits the form after having filled it with a wrong email or password. \\ \hline

\textbf{Mapping on requirements:}
\begin{itemize}
\item Events from 3 through 5 granted by \reqref{req:R10};
\item Event 6 grandet by \reqref{req:R9};
\end{itemize} \\ \hline

\end{tabular}

\includegraphics[width=400pt, keepaspectratio]{"images/SequenceDiagramLogIn".png}

\subsubsection{Appointment creation} \label{usecase:appcreation}

\begin{longtable}{|p{14cm}|} \hline
\textbf{Name:} Appointment creation \\ \hline
\textbf{Actors:} User \\ \hline
\textbf{Goals:} \goalref{goal:G1} \\ \hline
\textbf{Input Condition:} 
\begin{itemize}
\item The user is registered to the system 
\item The user is logged in to the systems 
\end{itemize}
\\ \hline
\textbf{Event Flow:}
\begin{enumerate}
\item The user wants to add a new appointment to his schedule;
\item The user requests the appointments page
\item The system provides the appointments page
\item The user requests the creation of a new appointment to the application;
\item The system provides to the user a form to fill;
\item The user fills up the form with the parameters (specified in \ref{subsect:appointmentmodel}) and constraints (specified in \ref{subsubsect:constronappoint} about the new appointment;
\item The user submit the form to the system;
\item The system allocates the new appointment as Unscheduled (referring to statechart in figure; \label{fig:stchartApp})
\item The system sends a confirmation to the user.
\end{enumerate}	\\ \hline

\textbf{Output Condition:} The user submit the form after filling it with all the parameters needed. Constraints fields could also be left blank (they are optional); \\ \hline

\textbf{Exceptions:}
\begin{enumerate}
\item Some fields of the form referring to parameters are left blank;
\item The \textit{location} field doesn't belong to the domain area of the application (\textbf{riferimento alla domain assumption della regione})
\end{enumerate} \\ \hline
\textbf{Mapping on Requirements:}
\begin{itemize}
\item Events 4 through 7 are granted by \reqref{req:R2}
\item Event 7 is granted by \reqref{req:R1}
\end{itemize}  \\ \hline


\end{longtable}

\begin{figure}[H]
\begin{center}
\includegraphics[width=400pt, keepaspectratio]{"images/sequenceDiagramAppointmentCreation".png}
\caption{Appointment creation sequence diagram}
\label{img:seqDiagrAppCreation}
\end{center}
\end{figure}

In the sequence diagram there's the assumption that the log-in proceeds successfully. The log-in procedure referenced is the one explained in (\textbf{use case del log-in}.)

\subsubsection{ScheduleSelection}
\begin{longtable}{|p{14cm}|} \hline
\textbf{Name:} Multiple Schedules creation \\ \hline
\textbf{Actors:} User \\ \hline
\textbf{Goals:} \textbf{aggiungere rif al goal} \\ \hline
\textbf{Input Condition:} 
\begin{itemize}
\item The user is registered to the system 
\item The user is logged in to the systems 
\end{itemize}
\\ \hline
\textbf{Event Flow:}
\begin{enumerate}
\item The user wants to compare multiple schedules;
\item The user requests the schedules page;
\item The system provides the schedules page;
\item The user selects a schedule to be run;
\item The system display the mainpage with the schedule results (fare riferimento alla definizione)
\end{enumerate}	\\ \hline
\textbf{Output Condition:} The user selects a schedule to be run \\ \hline
\textbf{Exceptions:}
\\ \hline
\textbf{Mapping on Requirements:}
\begin{itemize}
\item Events are granted by the requirment R10 \textbf{(mettere riferimenti)}
\end{itemize}  \\ \hline

\end{longtable}
\label{usecase:ScheduleSelection}

\begin{figure}[H]
\begin{center}
\includegraphics[width=400pt, keepaspectratio]{"images/ScheduleSelectionSequenceDiagram".png}
\caption{Appointment creation sequence diagram}
\label{img:ScheduleSelection}
\end{center}
\end{figure}

\subsection{Definition of use case diagrams}
eventuali informzioni che specificano meglio come leggere i deagrammi che si producono


